(dp1
S'output'
p2
S"<type 'exceptions.IOError'> [Errno 2] No such file or directory: '/home/www-data/web2py/applications/HEIDIEditor/uploads/t_file_management.f_original_document.9825e69376bd98a9.30342e786d6c/nlm/out.xml'"
p3
sS'layer'
p4
S'/home/www-data/web2py/applications/HEIDIEditor/controllers/default.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n### required - do no delete\n#import oxgarage\n\ndef user(): return dict(form=auth())\ndef download(): return response.download(request,db)\ndef call():\n    session.forget()\n    return service()\n### end requires\ndef index():\n    return dict()\n\ndef error():\n    return dict()\n\ndef typesetter(upload_file_name):\n\tmetypeset_conversion(upload_file_name)\n\trow = db(db.t_file_management.f_original_document==upload_file_name).select().first()\n\trow.update(f_tei_xml_file=upload_file_name.rsplit(\'.\', 1)[0]+\'_tei.xml\', f_nlm_xml_file=upload_file_name.rsplit(\'.\', 1)[0]+\'_nlm.xml\')\n\trow.update_record() \n\n@auth.requires_login()\ndef file_management_create():\n    upload_file_name = None\n    form=crud.create(db.t_file_management)\n    if form.accepts(request,session):\n        upload_file_name = form.vars.f_original_document\n        if request.vars.f_original_document!=None:\n            form.vars.f_original_filename = request.vars.f_original_document.filename\n            crud.settings.create_onaccept = typesetter(upload_file_name)\n            redirect(URL(\'file_management_select\'))\n        #result=oxgrarage_conversion(upload_file_name)\n    return dict(form=form,result= db(db.t_file_management.f_original_document==upload_file_name).select().first())\n\n@auth.requires_login()\ndef file_management_read():\n    record = db.t_file_management(request.args(0)) or redirect(URL(\'error\'))\n    form=crud.read(db.t_file_management,record)\n    return dict(form=form)\n\n@auth.requires_login()\ndef file_management_update():\n    record = db.t_file_management(request.args(0),active=True) or redirect(URL(\'error\'))\n    form=crud.update(db.t_file_management,record,next=\'file_management_read/[id]\',\n                     ondelete=lambda form: redirect(URL(\'file_management_select\')),\n                     onaccept=crud.archive)\n    return dict(form=form)\n\n@auth.requires_login()\ndef file_management_select():\n    f,v=request.args(0),request.args(1)\n    try: query=f and db.t_file_management[f]==v or db.t_file_management\n    except: redirect(URL(\'error\'))\n    rows=db(query)(db.t_file_management.active==True).select(db.t_file_management.id,db.t_file_management.f_filename,db.t_file_management.f_original_document,\\\n    db.t_file_management.f_tei_xml_file, db.t_file_management.f_nlm_xml_file, db.t_file_management.f_xhtml_file, db.t_file_management.f_pdf_file,\\\n    db.t_file_management.modified_on,db.t_file_management.modified_by, orderby=~db.t_file_management.modified_on)\n    return dict(rows=rows)\n\n@auth.requires_login()\ndef file_management_search():\n    form, rows=crud.search(db.t_file_management,query=db.t_file_management.active==True)\n    return dict(form=form, rows=rows)\n\ndef enterkey_create():\n    result=\'not ok\'\n    form=crud.create(db.t_enter_key)\n    if form.accepts(request,session):\n        response.flash=("done")\n\n    return dict(form=form, result=result)\n\nresponse._vars=response._caller(file_management_create)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/www-data/web2py/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/home/www-data/web2py/applications/HEIDIEditor/controllers/default.py", line 73, in <module>\n  File "/home/www-data/web2py/gluon/globals.py", line 411, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/www-data/web2py/gluon/tools.py", line 4271, in f\n    return action(*a, **b)\n  File "/home/www-data/web2py/applications/HEIDIEditor/controllers/default.py", line 31, in file_management_create\n    crud.settings.create_onaccept = typesetter(upload_file_name)\n  File "/home/www-data/web2py/applications/HEIDIEditor/controllers/default.py", line 18, in typesetter\n    metypeset_conversion(upload_file_name)\n  File "/home/www-data/web2py/applications/HEIDIEditor/models/metypeset.py", line 28, in metypeset_conversion\n    shutil.move(src_dir, dst_dir)\n  File "/usr/lib/python2.7/shutil.py", line 302, in move\n    copy2(src, real_dst)\n  File "/usr/lib/python2.7/shutil.py", line 130, in copy2\n    copyfile(src, dst)\n  File "/usr/lib/python2.7/shutil.py", line 82, in copyfile\n    with open(src, \'rb\') as fsrc:\nIOError: [Errno 2] No such file or directory: \'/home/www-data/web2py/applications/HEIDIEditor/uploads/t_file_management.f_original_document.9825e69376bd98a9.30342e786d6c/nlm/out.xml\'\n'
p11
s.